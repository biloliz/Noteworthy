#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

struct Note {
    string title;
    string content;
};

void displayMenu() {
    cout << "1. Create a new note" << endl;
    cout << "2. View notes" << endl;
    cout << "3. Save notes" << endl;
    cout << "4. Load notes" << endl;
    cout << "5. Exit" << endl;
    cout << "Enter your choice: ";
}

void createNote(vector<Note>& notes) {
    Note newNote;
    cout << "Enter the title of the note: ";
    cin.ignore(); // Ignore newline character from previous input
    getline(cin, newNote.title);
    cout << "Enter the content of the note: ";
    getline(cin, newNote.content);
    notes.push_back(newNote);
    cout << "Note created successfully!" << endl;
}

void viewNotes(const vector<Note>& notes) {
    if (notes.empty()) {
        cout << "No notes available." << endl;
        return;
    }
    for (size_t i = 0; i < notes.size(); ++i) {
        cout << "Note " << i + 1 << ":" << endl;
        cout << "Title: " << notes[i].title << endl;
        cout << "Content: " << notes[i].content << endl;
        cout << "---------------------------" << endl;
    }
}

void saveNotes(const vector<Note>& notes) {
    ofstream file("notes.txt");
    if (!file.is_open()) {
        cout << "Error opening file for saving." << endl;
        return;
    }
    for (const auto& note : notes) {
        file << note.title << endl;
        file << note.content << endl;
        file << "----" << endl; // Delimiter between notes
    }
    file.close();
    cout << "Notes saved successfully!" << endl;
}

void loadNotes(vector<Note>& notes) {
    ifstream file("notes.txt");
    if (!file.is_open()) {
        cout << "Error opening file for loading." << endl;
        return;
    }
    notes.clear();
    Note note;
    string line;
    while (getline(file, line)) {
        if (line == "----") {
            notes.push_back(note);
            note = Note();
        } else if (note.title.empty()) {
            note.title = line;
        } else {
            note.content += line + '\n';
        }
    }
    file.close();
    cout << "Notes loaded successfully!" << endl;
}

int main() {
    vector<Note> notes;
    int choice;
    do {
        displayMenu();
        cin >> choice;
        switch (choice) {
            case 1:
                createNote(notes);
                break;
            case 2:
                viewNotes(notes);
                break;
            case 3:
                saveNotes(notes);
                break;
            case 4:
                loadNotes(notes);
                break;
            case 5:
                cout << "Exiting..." << endl;
                break;
            default:
                cout << "Invalid choice. Please try again." << endl;
                break;
        }
    } while (choice != 5);

    return 0;
}
